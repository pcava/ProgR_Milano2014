
## ----howRworks-001-------------------------------------------------------
eval(parse (text = "a <-  1"))


## ----howRworks-002-------------------------------------------------------
parse(text = "a <- 1")


## ----howRworks-003, eval=FALSE-------------------------------------------
## parse(file = './input.R')


## ----howRworks-004-------------------------------------------------------
expr <-  parse (text = "a <- 1")
class(expr)
str(expr)
as.list(expr)
as.list(expr[[1]])


## ----howRworks-005-------------------------------------------------------
expr <-  parse (text = "1+2")
as.list(expr[[1]])
expr[[1]][[3]] = 7
as.list(expr[[1]])


## ----howRworks-006-------------------------------------------------------
eval(expr)


## ----howRworks-007, eval = FALSE-----------------------------------------
## mean(x = 1:10)


## ----howRworks-008, eval = FALSE-----------------------------------------
## x <- 0


## ----howRworks-009-------------------------------------------------------
if ( pi > 0) 1 else  0


## ----howRworks-010-------------------------------------------------------
1


## ----howRworks-011-------------------------------------------------------
-1


## ----howRworks-012-------------------------------------------------------
x <- 0
class(quote(x))


## ----howRworks-013, echo=FALSE, results='hide'---------------------------
remove(list = ls())


## ----howRworks-014-------------------------------------------------------
.x <- 0
ls()
ls(all.names = TRUE)


## ----howRworks-015-------------------------------------------------------
delayedAssign("promise" , {x+y})
x <- 0
y <- 1
eval(promise)


## ----howRworks-016-------------------------------------------------------
median(x = 1:10)
exists("x")
median(x <- 1:10)
exists("x")
x


## ----howRworks-017-------------------------------------------------------
'='(a, 1)
a
'<-'(b, 2)
b


## ----howRworks-018-------------------------------------------------------
x = xx = 1
y = yy = 0 
c(x, xx, y, yy)


## ----howRworks-019-------------------------------------------------------
k = p <- 0  
c(k, p)


## ----howRworks-020-------------------------------------------------------
k <- p = 0  


## ----howRworks-021-------------------------------------------------------
env <-new.env()  
parent.env(env) 
eval(parse(text = "x <<- 8"), env = env)


## ----howRworks-022-------------------------------------------------------
ls(env = env)


## ----howRworks-023-------------------------------------------------------
get("x", env = env)


## ----howRworks-024-------------------------------------------------------
x


## ----howRworks-025-------------------------------------------------------
rm(list = ls())
ls()


## ----howRworks-026-------------------------------------------------------
x <- 1; y <- 2; z <- 3
ls()
rm(list = c("x", "y", "z"))
ls()


## ----howRworks-027-------------------------------------------------------
x <- 1; y <- 2; z <- 3
ls()
rm("x", "y", "z")
ls()


## ----howRworks-028-------------------------------------------------------
x <- 1; y <- 2; z <- 3
ls()
rm(x, y, z)
ls()


## ----howRworks-029-------------------------------------------------------
gc()


## ----howRworks-030-------------------------------------------------------
n <- 100*10^7
bigMatrix <-  matrix(1:n, ncol = 10000)


## ----howRworks-031-------------------------------------------------------
gc()


## ----howRworks-032-------------------------------------------------------
print(object.size(bigMatrix), units = "Gb")


## ----howRworks-033-------------------------------------------------------
rm(bigMatrix)
gc()


## ----howRworks-034-------------------------------------------------------
clear = function(env = globalenv()) {
  obj = ls(envir = env)
  rm(list = obj, envir = env)
}


## ----howRworks-035-------------------------------------------------------
x <- 1; y <- 2; z <- 3
ls()
clear()
ls()


## ----howRworks-036-------------------------------------------------------
a <- 2
clear()


## ----howRworks-037-------------------------------------------------------
clear <-  function (env = globalenv()){
  objects <-  objects(env)
  objects <-  objects[objects != "clear"]
  rm(list = objects, envir = env)
  invisible (NULL)
}


## ----howRworks-038-------------------------------------------------------
a <- b <- c <- 0
clear()
a <- b <- c <- 1
clear()


## ----howRworks-039-------------------------------------------------------
clean <- clear
rm (clear)
a <- b <- c <- 0
clean()


## ----howRworks-040-------------------------------------------------------
a <- 3
clean()


## ----howRworks-041-------------------------------------------------------
clear <- function (env = globalenv()){
  fname <- as.character(match.call()[[1]])
  objects <- objects(env)
  objects <- objects[objects != fname]
  rm(list <- objects, envir = env)
  invisible (NULL)
}


## ----howRworks-042-------------------------------------------------------
assign("clean",
  function(){
    rm(list = ls(envir = globalenv()), envir = globalenv())
  },
  envir = attach(NULL, name = "myenv", pos = 2)
)


## ----howRworks-043-------------------------------------------------------
a <- b <- c <- 0
ls()
clean()
ls()


